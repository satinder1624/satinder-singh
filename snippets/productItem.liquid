<div class="productItem">
  <div class="productImageWrapper">
    <img
      class="mobileImage"
      src="{{ product.featured_image | img_url: '500x500' }}"
      alt="{{ product.title }}"
      width=""
      height=""
    >
    {}
  </div>
</div>
{% comment %} Dialog modal for product info {% endcomment %}
<dialog class="productModal" id="modal-{{ forloop.index }}">
  <div class="modalContent">
    <span class="closeModal" data-product-id="{{ forloop.index }}">
      <img src="{{ 'cross.png' | asset_url }}" alt="Banner" width="" height="">
    </span>
    {% comment %} Product info container {% endcomment %}
    <div class="productInfoContainer">
      <div class="productImg">
        <img
          src="{{ product.featured_image | img_url: '280x280' }}"
          alt="{{ product.title }}"
          width=""
          height=""
        >
      </div>
      <div class="productDetails">
        <span class="productTitle">{{ product.title }}</span>
        <span class="productPrice">{{ product.price | money_with_currency }}</span>
        <span class="productDescription">{{ product.description | strip_html | truncate: 100 }}</span>
      </div>
    </div>
    {% comment %} Color selection {% endcomment %}
    <div>
      <div color="colorWrapper">
        <span class="colorLabel">Color</span>
        <div class="colorContainer">
          {% assign available_colors = '' %}
          {% for variant in product.variants %}
            {% unless available_colors contains variant.option2 %}
              {% assign available_colors = available_colors | append: variant.option2 | append: ',' %}
            {% endunless %}
          {% endfor %}
          {% assign color_list = available_colors | split: ',' %}
          {% for color in color_list %}
            {% if color != '' %}
              <div class="colorBox {% if forloop.last %}colorBoxRight{% else %}colorBoxLeft{% endif %}">
                <div
                  class="{% if forloop.last %}onlyForBorderRight{% else %}onlyForBorderLeft{% endif %}"
                  style="background-color: {{color}}"
                ></div>
                <span>{{ color }}</span>
              </div>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>
    {% comment %} Size selection {% endcomment %}
    <div class="dropdown">
      <div class="dropdownContent">
        <div class="dropdownLabel">Select Size</div>
        <div class="dropdownArrow"></div>
      </div>
      <div class="dropdownOptions">
        {% assign available_sizes = '' %}
        {% for variant in product.variants %}
          {% unless available_sizes contains variant.option1 %}
            {% assign available_sizes = available_sizes | append: variant.option1 | append: ',' %}
            <div class="option">{{ variant.option1 }}</div>
          {% endunless %}
        {% endfor %}
      </div>
    </div>
    {% comment %} Add to cart {% endcomment %}
    <div class="addToCart">
      <button
        class="addToCartBtn"
        data-product-index="{{ forloop.index }}"
        data-product-id="{{ product.id }}"
        data-product-handle="{{ product.handle }}"
      >
        <span>Add to cart</span>
        <img src="{{ 'leftWhiteArrow.png' | asset_url }}" width="object-fit" height="auto">
      </button>
    </div>
  </div>
</dialog>
